<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="view/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite Component</title>
    <style>
      body,
      html {
        height: max-content !important;
        zoom: unset !important;
        margin: 0;
        padding: 0;
        min-width: auto !important;
        font-size: 14px !important;
        overflow: auto !important;
        user-select: auto !important;
      }
    </style>
  </head>
  <body>
    <link
      rel="stylesheet"
      href="//g.alicdn.com/code/lib/antd/4.0.4/antd.min.css"
    />
    <div id="component-root"></div>

    <!--    <script crossorigin="anonymous" src="https://g.alicdn.com/code/lib/react/16.8.6/umd/react.development.js"></script>-->
    <!--    <script crossorigin="anonymous" src="https://g.alicdn.com/code/lib/react-dom/16.8.6/umd/react-dom.development.js"></script>-->
    <script
      crossorigin="anonymous"
      src="//assets.alicdn.com/g/??lazada/static/0.0.5/react-full-16-8.js"
    ></script>

    <script src="//g.alicdn.com/code/lib/moment.js/2.24.0/moment.min.js"></script>
    <script src="//g.alicdn.com/code/lib/antd/4.0.4/antd.min.js"></script>

    <script>
      window.pageConfig = {
        route: "{{route}}",
        readmePath: "{{readmePath}}",
      };
    </script>
    <script src="https://g.alicdn.com/code/lib/lodash.js/4.17.15/lodash.min.js"></script>
    <script src="//g.alicdn.com/platform/c/??react15-polyfill/0.0.1/dist/index.js"></script>
    <script src="https://g.alicdn.com/intl-dada/dada-visualengine/0.0.1/engine.js"></script>
    <script src="https://g.alicdn.com/intl-dada/dada-vision-utils/4.1.2/engine-utils.min.js"></script>

    {{ externalHtml }}

    <script type="module">
      window.RuntimeLoadMap$ = {
        // "{{route}}/index.tsx": import("{{route}}/index.tsx"),
        "{{route}}/index.tsx.type$.json": import(
          "{{route}}/index.tsx.type$.json"
        ),
        "/route-map": import("/route-map.json"),
        "/package.json": import("/package.json"),
        "{{readmePath}}": import("{{readmePath}}"),
      };
      if (!window.$RegistryFns) {
        window.$RegistryFns = {};
      }

      const __updateFns = window.$RegistryFns;
      window.RegistryMap$ = (p, cb) => {
        if (!__updateFns[p]) {
          __updateFns[p] = new Set();
        }
        const fn = (newModule) => {
          cb(new Date().valueOf(), newModule);
          __updateFns[p].delete(fn);
        };
        __updateFns[p].add(fn);
      };
      if (import.meta.hot) {
        import("/@vite/client").then(({ createHotContext }) => {
          Object.keys(window.RuntimeLoadMap$).forEach((file) => {
            createHotContext(file).accept((newModule) => {
              window.RuntimeLoadMap$[file] = newModule;
              const tasks = __updateFns[file] || new Set();

              [...tasks].forEach((fn) => fn(newModule));
            });
          });
        });
        import.meta.hot.accept(() => {
          const tasks = __updateFns["{{readmePath}}"] || new Set();

          [...tasks].forEach((fn) => fn());
        });
      }

      import("{{dirname}}/view/runtime");
    </script>

    {% if !isDebug %}
    <script type="module" src="{{dirname}}/view/style.css"></script>
    {% endif %}
  </body>
</html>
